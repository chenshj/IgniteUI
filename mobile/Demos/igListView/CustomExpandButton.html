<!DOCTYPE html>
<html>
<head>
    <title>jQuery Samples</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    
    <link rel="stylesheet" href="../content/jqm/jquery.mobile.structure.min.css" />
	<link rel="stylesheet" href="../content/css/overrides.css" />

    <script type="text/javascript" src="../scripts/jquery.min.js"></script>
    <script>
        $(document).bind("mobileinit", function () {
            //turn off AJAX for file-system navigation
            $.mobile.ajaxEnabled = false;
        });
    </script>    <script type="text/javascript" src="../scripts/jquery.mobile.min.js"></script>
    <script type="text/javascript" src="../../js/infragistics.mobile.loader.js"></script>
    <script type="text/javascript">
        $.ig.loader({
            scriptPath: "../../js/",
            cssPath: "../../css/",
            resources: "igmList.Sorting,igmList.Filtering",
            theme: "ios"
        });
    </script>
    <!--Sample JSON Data-->
    <script type="text/javascript" src="../scripts/db/nw-products.js"></script>
</head>
<body>
    <div data-role="page">
        <style type="text/css">
            /*This css is to hide the sort/filter tray*/
            .ui-iglist-tray-collapse
            {
                display:none;
            }

            .ui-iglist-tray-footer-collapsed
            {
                display:none;
            }

        </style>  
        <div data-role="header">
            <a href="../index.html" rel="external" data-iconpos="notext" data-icon="back" data-direction="reverse"></a>
            <h1>Custom Expand Button</h1>
            <a href="#descriptionDialog" data-rel="dialog" data-iconpos="notext" data-icon="info"></a>
        </div>
        <div data-role="content">
            <script type="text/javascript">

                //Bind to jQuery Mobile page init event.
                $(document).bind("pageinit", function () {

                    $("#listViewExpandButton").bind("click", function () {
                        //This method expands and collapses the sort/filter tray
                        $("#listViewExpand").igListView("rootWidget").toggleSearchArea();
                    });
                });

            </script>
            <div style="margin-bottom:30px">
                <div id="listViewExpandButton" data-role="button" >Sort and Filter Products</div>
            </div>
            <ul id="listViewExpand"
                data-role="iglistview" 
                data-image-mode="none"
                data-auto-generate-layouts="False" 
                data-bindings-text-key="ProductName"
                data-bindings-description-key="CategoryName"
                data-data-source="northwindProducts" 
                data-data-source-type="json" 
                data-filtering="true" 
                data-filtering-name="Filtering" 
                data-sorting="true" 
                data-sorting-auto-generate-sort-presets="true" 
                data-sorting-name="Sorting" 
                data-sorting-presets='[ {"text":"ProductName","sortedFields":[ {"fieldName":"ProductName"} ]}, {"text":"CategoryName","sortedFields":[ {"fieldName":"CategoryName"} ]} ]' >
            </ul>

        </div>
    </div>
    <div data-role="page" id="descriptionDialog">
        <div data-role="header">
            <h1>Description</h1>
        </div>
        <div data-role="content">
            <div class="description">
                In this sample, the sort/filter tray is hidden through CSS. Click the ‘Sort and Filter Products’ button to expand and collapse the sort/filter tray using the toggleSearchArea method.
				<a data-role="button" data-icon="arrow-l" data-rel="back">Back To Sample</a>
            </div>
        </div>
    </div>
</body>
</html>
